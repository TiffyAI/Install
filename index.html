<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Motion Power Sphere</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#161b22">
<style>
    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #0d1117;
        color: #c9d1d9;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    canvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 1;
    }
    .hud {
        z-index: 20;
        background: rgba(13, 17, 23, 0.7);
        backdrop-filter: blur(12px);
        border-radius: 1rem;
        border: 1px solid rgba(48, 54, 61, 0.5);
        padding: 1rem 2rem;
        text-align: center;
    }
    .glass-btn {
        transition: all 0.3s ease;
        border: 2px solid rgba(88,166,255,0.7);
        background: rgba(13,17,23,0.4);
        color: #58a6ff;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(88,166,255,0.7);
        backdrop-filter: blur(8px);
        padding: 0.75rem 1.5rem;
        border-radius: 9999px;
        font-size: 1.2rem;
    }
    .glass-btn:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 0 15px rgba(88,166,255,0.8);
    }
</style>
</head>
<body>

<div class="hud">
    <h1 class="text-3xl font-bold mb-2">Welcome Back, Sphere Tamer ü™ê</h1>
    <p class="mb-4 text-gray-400">Tilt, tap, or drag me. I live for the attention.</p>
    <button id="funButton" class="glass-btn">Make Me Spin Faster!</button>
</div>

<script>
// Preload click sound
const clickSound = new Audio('../click.wav');

// 3D Sphere setup
let mouseX = 0, mouseY = 0;
let scene, camera, renderer, sphere;

function init3D() {
    scene = new THREE.Scene();
    scene.background = new THREE.Color(0x0d1117);

    camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 2.5;

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.insertBefore(renderer.domElement, document.body.firstChild);

    const geometry = new THREE.IcosahedronGeometry(1, 1);
    const material = new THREE.MeshPhongMaterial({
        color: 0x58a6ff,
        shininess: 30,
        specular: 0xffffff,
        flatShading: true
    });
    sphere = new THREE.Mesh(geometry, material);
    scene.add(sphere);

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
    directionalLight.position.set(5, 5, 5).normalize();
    scene.add(directionalLight);

    document.addEventListener('mousemove', e => {
        mouseX = (e.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
    });

    document.addEventListener('touchmove', e => {
        if (e.touches.length > 0) {
            mouseX = (e.touches[0].clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.touches[0].clientY / window.innerHeight) * 2 + 1;
        }
    });

    if (window.DeviceOrientationEvent) {
        window.addEventListener('deviceorientation', e => {
            if (e.gamma && e.beta) {
                mouseX = e.gamma / 45;
                mouseY = e.beta / 45;
            }
        });
    }

    window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

function animate() {
    requestAnimationFrame(animate);
    sphere.rotation.x += (mouseY * 0.5 - sphere.rotation.x) * 0.05;
    sphere.rotation.y += (mouseX * 0.5 - sphere.rotation.y) * 0.05;
    renderer.render(scene, camera);
}

window.onload = () => {
    init3D();
    animate();
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js');
    }
};

// Button click fun
document.getElementById('funButton').addEventListener('click', () => {
    clickSound.play();
    sphere.rotation.x += 0.5;
    sphere.rotation.y += 0.5;
    alert("Woo! You gave me a turbo boost üí®");
});
</script>

</body>
</html>
